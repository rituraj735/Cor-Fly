<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script src="https://kit.fontawesome.com/d69811cbc4.js" crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  </head>
  <body>
    <form class="modal-content animate" method="POST" action="/cancel">
    <div class="container1">
      <h4 id="name">Name: <%=name %></h4>
      <h4 id="phone">Contact: <%=phone %></h4>
      <h4 id="from">From: <%=from%></h4>
      <h4 id="to">To: <%=to %></h4>
      <h4 id="flight">Flight: <%=flight %></h4>
      <h4 id="date">Date: <%=date%></h4>
      <h4 id="pnr">PNR: <%=pnr%></h4>
      <input type="hidden" name="pnr" value="<%=pnr%>">
      <h4 id="seat-no">Seat Number(s): <%=seat %></h4>
      <h4 id="health">Covid-19 status:   <%=health%></h4>
      <h4 id="confirm">Payment and booking status:      Confirmed</h4>
      <button  onclick="generatePDF()">Print</button>
      <button type="submit" id="cancelbtn">Cancel Ticket</button>
    </div>
   </form>
   <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
   <script
 		src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"
 	  integrity="sha256-vIL0pZJsOKSz76KKVCyLxzkOT00vXs+Qz4fYRVMoDhw="
 	  crossorigin="anonymous">
 	</script>

    <script>

  		const pdf = new jsPDF();
      pdf.setProperties({
      title: 'Reservation ticket',
      subject: 'Ticket',
      author: 'Airport Manager',
      keywords: 'generated, javascript, web 2.0, ajax',
      creator: 'ABC Airlines'
      });
  		let button = document.querySelector('button');
      var intro="\t\t\t\tFLIGHT RESERVATION TICKET";
      var name=document.getElementById("name").textContent;
      var phone=document.getElementById("phone").textContent;
      var from=document.getElementById("from").textContent;
      var to=document.getElementById("to").textContent;
      var flight = document.getElementById("flight").textContent;
      var date=document.getElementById("date").textContent;
      var pnr = document.getElementById("pnr").textContent;
      var seat_no=document.getElementById("seat-no").textContent;
      var health=document.getElementById("health").textContent;
      var confirm=document.getElementById("confirm").textContent;
      var thanks="\t\t\tHave a nice flight!!";
      var courtesy="\t\t\tCourtesy: ABC Airlines";
      var whitespace="";
      var pdfcontent=[];
      var PNR="12345";
      pdfcontent.push(intro,whitespace,whitespace,name,whitespace,phone,whitespace,from,whitespace,to,whitespace,flight,whitespace,date,whitespace,
      pnr,whitespace,seat_no,whitespace,health,whitespace,confirm,whitespace,whitespace,thanks,whitespace,whitespace,whitespace,courtesy);
  		button.addEventListener('click', printPDF);
  		function printPDF() {
  			pdf.text(10, 10, pdfcontent);
  			pdf.save(PNR+".pdf");
  		}
      var modal = document.getElementById('id01');
      window.onclick = function(event) {
          if (event.target == modal) {
              modal.style.display = "none";
          }
      }
  	</script>

  </body>
  <script src="cancel.js" charset="utf-8"></script>
</html>
